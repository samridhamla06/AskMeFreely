{"ast":null,"code":"import _slicedToArray from \"/Users/samridhamla/Downloads/AskMeFreely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/samridhamla/Downloads/AskMeFreely/src/MyComponents/SessionList.js\";\n\nimport React, { useEffect, useState } from 'react';\nimport { GET_SESSION_URL, ACCESS_TOKEN, LOGGED_IN_EMAIL } from '../constants/url';\nimport { Session } from './Session';\nimport swal from 'sweetalert';\nimport { useNavigate } from 'react-router-dom';\nimport { checkTokenFromResponse } from '../utils/UserLoginUtils';\nexport var SessionList = function SessionList(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      sessionAsMentorList = _useState2[0],\n      setSessionAsMentorList = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sessionAsMenteeList = _useState4[0],\n      setSessionAsMenteeList = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pageLoading = _useState6[0],\n      setPageLoading = _useState6[1];\n\n  var _useState7 = useState(1),\n      _useState8 = _slicedToArray(_useState7, 2),\n      renderCount = _useState8[0],\n      setRenderCount = _useState8[1];\n\n  var navigate = useNavigate();\n  var sNo_mentor = 0;\n  var sNo_mentee = 0;\n  useEffect(function () {\n    console.log('useEffect called');\n    var access_token = localStorage.getItem(ACCESS_TOKEN);\n    var userEmail = localStorage.getItem(LOGGED_IN_EMAIL);\n\n    if (!access_token) {\n      swal(\"Oops\", \"No token present, Please log in and try again\", \"error\"); //navigate to homepage\n\n      navigate(\"/\", {\n        replace: true\n      });\n    } //API call to fetch user info\n\n\n    fetch(GET_SESSION_URL + \"?id=\" + userEmail, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'authorization': access_token\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (response) {\n      if (checkTokenFromResponse(response, props.updateUser)) {\n        //navigate to homepage\n        navigate(\"/\", {\n          replace: true\n        });\n        return;\n      }\n\n      console.log('Sessions received from Backend', response);\n      var sessionForMentor = [];\n      var sessionForMentee = [];\n      response.forEach(function (sessionResponse) {\n        if (sessionResponse.sessionType == \"SESSION_AS_MENTEE\") {\n          sessionForMentee.push(sessionResponse);\n        } else {\n          sessionForMentor.push(sessionResponse);\n        }\n      });\n      setSessionAsMentorList(sessionForMentor);\n      setSessionAsMenteeList(sessionForMentee);\n    }).catch(function (err) {\n      console.log(err);\n    }).finally(function () {\n      setPageLoading(false);\n    });\n  }, [renderCount]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pt-5 mt-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, pageLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex flex-column align-items-center justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex flex-column justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"spinner-border text-primary mt-4\",\n    role: \"status\",\n    \"aria-hidden\": \"true\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 29\n    }\n  }))) : /*#__PURE__*/React.createElement(React.Fragment, null, sessionAsMentorList.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 37\n    }\n  }, \"Sessions as Mentor\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 37\n    }\n  }, sessionAsMentorList.map(function (session, index) {\n    return /*#__PURE__*/React.createElement(Session, {\n      key: index,\n      session: session,\n      setRenderCount: setRenderCount,\n      asMentor: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 56\n      }\n    });\n  }))), sessionAsMenteeList.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 30\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 33\n    }\n  }, \"Sessions as Mentee\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 33\n    }\n  }, sessionAsMenteeList.length > 0 && sessionAsMenteeList.map(function (session, index) {\n    return /*#__PURE__*/React.createElement(Session, {\n      key: index,\n      session: session,\n      setRenderCount: setRenderCount,\n      asMentor: false,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 56\n      }\n    });\n  })))));\n};","map":{"version":3,"sources":["/Users/samridhamla/Downloads/AskMeFreely/src/MyComponents/SessionList.js"],"names":["React","useEffect","useState","GET_SESSION_URL","ACCESS_TOKEN","LOGGED_IN_EMAIL","Session","swal","useNavigate","checkTokenFromResponse","SessionList","props","sessionAsMentorList","setSessionAsMentorList","sessionAsMenteeList","setSessionAsMenteeList","pageLoading","setPageLoading","renderCount","setRenderCount","navigate","sNo_mentor","sNo_mentee","console","log","access_token","localStorage","getItem","userEmail","replace","fetch","method","headers","then","response","json","updateUser","sessionForMentor","sessionForMentee","forEach","sessionResponse","sessionType","push","catch","err","finally","length","map","session","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { GET_SESSION_URL, ACCESS_TOKEN, LOGGED_IN_EMAIL } from '../constants/url';\r\nimport { Session } from './Session'\r\nimport swal from 'sweetalert';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { checkTokenFromResponse } from '../utils/UserLoginUtils';\r\n\r\nexport const SessionList = (props) => {\r\n\r\n    const [sessionAsMentorList, setSessionAsMentorList] = useState([]);\r\n    const [sessionAsMenteeList, setSessionAsMenteeList] = useState([]);\r\n    const [pageLoading, setPageLoading] = useState(true);\r\n    const [renderCount, setRenderCount] = useState(1);\r\n    let navigate = useNavigate();\r\n    let sNo_mentor = 0;\r\n    let sNo_mentee = 0;\r\n\r\n    useEffect(() => {\r\n        console.log('useEffect called');\r\n        let access_token = localStorage.getItem(ACCESS_TOKEN);\r\n        let userEmail = localStorage.getItem(LOGGED_IN_EMAIL);\r\n\r\n        if (!access_token) {\r\n            swal(\"Oops\", \"No token present, Please log in and try again\", \"error\")\r\n            //navigate to homepage\r\n            navigate(\"/\", { replace: true });\r\n        }\r\n\r\n        //API call to fetch user info\r\n        fetch(GET_SESSION_URL + \"?id=\" + userEmail,\r\n            { method: 'GET', headers: { 'Content-Type': 'application/json', 'authorization': access_token } })\r\n            .then(response => response.json())\r\n            .then(response => {\r\n                if(checkTokenFromResponse(response, props.updateUser)){\r\n                    //navigate to homepage\r\n                    navigate(\"/\", { replace: true });\r\n                    return;                  \r\n                }\r\n                console.log('Sessions received from Backend', response);\r\n                let sessionForMentor = [];\r\n                let sessionForMentee = [];\r\n                response.forEach(sessionResponse => {\r\n                    if (sessionResponse.sessionType == \"SESSION_AS_MENTEE\") {\r\n                        sessionForMentee.push(sessionResponse)\r\n                    } else {\r\n                        sessionForMentor.push(sessionResponse)\r\n                    }\r\n                });\r\n                setSessionAsMentorList(sessionForMentor);\r\n                setSessionAsMenteeList(sessionForMentee);\r\n            })\r\n            .catch(\r\n                err => {\r\n                    console.log(err);\r\n                })\r\n            .finally(() => {\r\n                setPageLoading(false);\r\n            });\r\n    }, [renderCount])\r\n\r\n    return (\r\n        <div className='pt-5 mt-5'>\r\n            {pageLoading ?\r\n                (\r\n                    <div className=\"d-flex flex-column align-items-center justify-content-center\">\r\n                        <div className='d-flex flex-column justify-content-center'>\r\n                            <div class=\"spinner-border text-primary mt-4\" role=\"status\" aria-hidden=\"true\"></div>\r\n                        </div>\r\n                    </div>)\r\n                :\r\n                (\r\n                    <>\r\n                        {\r\n                            sessionAsMentorList.length > 0 && (\r\n                                <div className='container mb-3'>\r\n                                    <h4 className='mb-3'>Sessions as Mentor</h4>\r\n                                    <div class=\"row\">\r\n                                        {\r\n                                            sessionAsMentorList.map((session, index) => {\r\n                                                return <Session key={index} session={session} setRenderCount={setRenderCount} asMentor={true} />;\r\n                                            })\r\n                                        }\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        }\r\n\r\n                        {\r\n                            sessionAsMenteeList.length > 0 &&\r\n                            (<div className='container'>\r\n                                <h4 className='mb-3'>Sessions as Mentee</h4>\r\n                                <div class=\"row\">\r\n                                    {\r\n                                        sessionAsMenteeList.length > 0 &&\r\n                                        (\r\n                                            sessionAsMenteeList.map((session, index) => {\r\n                                                return <Session key={index} session={session} setRenderCount={setRenderCount} asMentor={false} />;\r\n                                            })\r\n                                        )\r\n                                    }\r\n                                </div>\r\n                            </div>)\r\n                        }\r\n                    </>)\r\n            }\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}