{"ast":null,"code":"import _slicedToArray from \"D:\\\\Clients Projects\\\\AskMeFreely\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Clients Projects\\\\AskMeFreely\\\\src\\\\MyComponents\\\\Header.js\";\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useLocation } from 'react-router';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { ACCESS_TOKEN, GOOGLE_AUTH_URL, LOGGED_IN_NAME, LOGGED_IN_EMAIL } from '../constants/url';\nimport GoogleLogin from 'react-google-login';\nimport { useMediaQuery } from 'react-responsive';\nimport { handleLogin, handleLoginFailure, validateTokenAndLogin, handleLogout } from '../utils/UserLoginUtils';\nexport var Header = function Header(props) {\n  var ref = useRef();\n  var isMobile = useMediaQuery({\n    query: \"(max-width: 900px)\"\n  });\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showDropdown = _useState2[0],\n      setShowDropDown = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showNestedDropdown = _useState4[0],\n      setShowNestedDropDown = _useState4[1];\n\n  var closeDropDown = function closeDropDown() {\n    setShowNestedDropDown(false);\n    setShowDropDown(false);\n  };\n\n  var toggleNestedDropDown = function toggleNestedDropDown() {\n    setShowNestedDropDown(function (oldValue) {\n      return !oldValue;\n    });\n  };\n\n  var toggleDropDown = function toggleDropDown() {\n    setShowDropDown(function (oldValue) {\n      return !oldValue;\n    });\n  };\n\n  var handleLoginWithProps = function handleLoginWithProps(googleData) {\n    handleLogin(googleData, props.updateUser);\n  }; //TODO: Move this part to App.js\n\n\n  useEffect(function () {\n    var access_token = localStorage.getItem(ACCESS_TOKEN); //if token is present, then maybe we should try to validate the token and log in\n\n    if (!props.isLoggedIn && access_token) {\n      validateTokenAndLogin(access_token, props.updateUser);\n    }\n  }, []);\n  useEffect(function () {\n    console.log(\"showDropdown changed\");\n\n    var checkIfClickedOutside = function checkIfClickedOutside(e) {\n      // If the menu is open and the clicked target is not within the menu,\n      // then close the menu\n      console.log(\"ref.current\", ref.current);\n      console.log(\"e.target\", e.target);\n\n      if (showDropdown && ref.current && !ref.current.contains(e.target)) {\n        console.log(\"call the dropdown\");\n        closeDropDown();\n      }\n    };\n\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\n    return function () {\n      // Cleanup the event listener\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\n    };\n  }, [showDropdown]);\n  var newLocation = {\n    pathname: \"/register\",\n    state: {\n      fromDashboard: true\n    }\n  }; //console.log(\"**** The google API key is\" + process.env.REACT_APP_GOOGLE_API_KEY);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"nav\", {\n    className: \" navbar-expand-lg fixed-top navbar-light bg-light\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navbar-caption ms-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 29\n    }\n  }, \"STAMMERERS CONNECT\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"navbar-toggler\",\n    type: \"button\",\n    \"data-bs-toggle\": \"collapse\",\n    \"data-bs-target\": \"#navbarSupportedContent\",\n    \"aria-controls\": \"navbarSupportedContent\",\n    \"aria-expanded\": \"false\",\n    \"aria-label\": \"Toggle navigation\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"navbar-toggler-icon\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collapse navbar-collapse justify-content-end me-5\",\n    id: \"navbarSupportedContent\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"navbar-nav\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"navbar-caption-text\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 33\n    }\n  }, \"About\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"navbar-caption-text\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 33\n    }\n  }, \"About\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item dropdown\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"navbar-caption-text\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 33\n    }\n  }, \"About\")))))));\n};","map":{"version":3,"sources":["D:/Clients Projects/AskMeFreely/src/MyComponents/Header.js"],"names":["React","useEffect","useState","useRef","useLocation","useNavigate","Link","ACCESS_TOKEN","GOOGLE_AUTH_URL","LOGGED_IN_NAME","LOGGED_IN_EMAIL","GoogleLogin","useMediaQuery","handleLogin","handleLoginFailure","validateTokenAndLogin","handleLogout","Header","props","ref","isMobile","query","showDropdown","setShowDropDown","showNestedDropdown","setShowNestedDropDown","closeDropDown","toggleNestedDropDown","oldValue","toggleDropDown","handleLoginWithProps","googleData","updateUser","access_token","localStorage","getItem","isLoggedIn","console","log","checkIfClickedOutside","e","current","target","contains","document","addEventListener","removeEventListener","newLocation","pathname","state","fromDashboard"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,SAASC,WAAT,QAA4B,cAA5B;AACA,SAASC,WAAT,EAAsBC,IAAtB,QAAkC,kBAAlC;AACA,SAASC,YAAT,EAAuBC,eAAvB,EAAwCC,cAAxC,EAAwDC,eAAxD,QAA+E,kBAA/E;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,SAASC,aAAT,QAA8B,kBAA9B;AACA,SAASC,WAAT,EAAsBC,kBAAtB,EAA0CC,qBAA1C,EAAiEC,YAAjE,QAAqF,yBAArF;AAEA,OAAO,IAAMC,MAAM,GAAG,SAATA,MAAS,CAACC,KAAD,EAAW;AAC7B,MAAMC,GAAG,GAAGhB,MAAM,EAAlB;AACA,MAAMiB,QAAQ,GAAGR,aAAa,CAAC;AAAES,IAAAA,KAAK;AAAP,GAAD,CAA9B;;AAF6B,kBAGWnB,QAAQ,CAAC,KAAD,CAHnB;AAAA;AAAA,MAGtBoB,YAHsB;AAAA,MAGRC,eAHQ;;AAAA,mBAIuBrB,QAAQ,CAAC,KAAD,CAJ/B;AAAA;AAAA,MAItBsB,kBAJsB;AAAA,MAIFC,qBAJE;;AAO7B,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACxBD,IAAAA,qBAAqB,CAAC,KAAD,CAArB;AACAF,IAAAA,eAAe,CAAC,KAAD,CAAf;AACH,GAHD;;AAKA,MAAMI,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AAC/BF,IAAAA,qBAAqB,CAAC,UAACG,QAAD,EAAc;AAChC,aAAO,CAACA,QAAR;AACH,KAFoB,CAArB;AAGH,GAJD;;AAMA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AACzBN,IAAAA,eAAe,CAAC,UAACK,QAAD,EAAc;AAC1B,aAAO,CAACA,QAAR;AACH,KAFc,CAAf;AAGH,GAJD;;AAMA,MAAME,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,UAAD,EAAgB;AACzClB,IAAAA,WAAW,CAACkB,UAAD,EAAab,KAAK,CAACc,UAAnB,CAAX;AACH,GAFD,CAxB6B,CA6B7B;;;AACA/B,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIgC,YAAY,GAAGC,YAAY,CAACC,OAAb,CAAqB5B,YAArB,CAAnB,CADY,CAGZ;;AACA,QAAI,CAACW,KAAK,CAACkB,UAAP,IAAqBH,YAAzB,EAAuC;AACnClB,MAAAA,qBAAqB,CAACkB,YAAD,EAAef,KAAK,CAACc,UAArB,CAArB;AACH;AACJ,GAPQ,EAON,EAPM,CAAT;AAUA/B,EAAAA,SAAS,CAAC,YAAM;AACZoC,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;;AACA,QAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAAC,CAAC,EAAI;AAC/B;AACA;AACAH,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BnB,GAAG,CAACsB,OAA/B;AACAJ,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBE,CAAC,CAACE,MAA1B;;AACA,UAAIpB,YAAY,IAAIH,GAAG,CAACsB,OAApB,IAA+B,CAACtB,GAAG,CAACsB,OAAJ,CAAYE,QAAZ,CAAqBH,CAAC,CAACE,MAAvB,CAApC,EAAoE;AAChEL,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAZ,QAAAA,aAAa;AAChB;AACJ,KATD;;AAWAkB,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCN,qBAAvC;AAEA,WAAO,YAAM;AACT;AACAK,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CP,qBAA1C;AACH,KAHD;AAIH,GAnBQ,EAmBN,CAACjB,YAAD,CAnBM,CAAT;AAqBA,MAAMyB,WAAW,GAAG;AAAEC,IAAAA,QAAQ,EAAE,WAAZ;AAAyBC,IAAAA,KAAK,EAAE;AAAEC,MAAAA,aAAa,EAAE;AAAjB;AAAhC,GAApB,CA7D6B,CA8D7B;;AACA,sBACI,uDACI;AAAK,IAAA,SAAS,EAAC,mDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACQ,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFJ,CADR,eAKI;AAAQ,IAAA,SAAS,EAAC,gBAAlB;AAAmC,IAAA,IAAI,EAAC,QAAxC;AAAiD,sBAAe,UAAhE;AAA2E,sBAAe,yBAA1F;AAAoH,qBAAc,wBAAlI;AAA2J,qBAAc,OAAzK;AAAiL,kBAAW,mBAA5L;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAM,IAAA,SAAS,EAAC,qBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CALJ,eAQI;AAAK,IAAA,SAAS,EAAC,mDAAf;AAAmE,IAAA,EAAE,EAAC,wBAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAa,IAAA,SAAS,EAAC,qBAAvB;AAA6C,IAAA,OAAO,EAAExB,aAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,CADJ,eAII;AAAI,IAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAa,IAAA,SAAS,EAAC,qBAAvB;AAA6C,IAAA,OAAO,EAAEA,aAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,CAJJ,eAOI;AAAI,IAAA,SAAS,EAAC,mBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAa,IAAA,SAAS,EAAC,qBAAvB;AAA6C,IAAA,OAAO,EAAEA,aAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,CAPJ,CADJ,CARJ,CADJ,CADJ,CADJ;AA4BH,CA3FM","sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\r\nimport { useLocation } from 'react-router';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { ACCESS_TOKEN, GOOGLE_AUTH_URL, LOGGED_IN_NAME, LOGGED_IN_EMAIL } from '../constants/url';\r\nimport GoogleLogin from 'react-google-login';\r\nimport { useMediaQuery } from 'react-responsive';\r\nimport { handleLogin, handleLoginFailure, validateTokenAndLogin, handleLogout } from '../utils/UserLoginUtils';\r\n\r\nexport const Header = (props) => {\r\n    const ref = useRef()\r\n    const isMobile = useMediaQuery({ query: `(max-width: 900px)` });\r\n    const [showDropdown, setShowDropDown] = useState(false);\r\n    const [showNestedDropdown, setShowNestedDropDown] = useState(false);\r\n\r\n\r\n    const closeDropDown = () => {\r\n        setShowNestedDropDown(false);\r\n        setShowDropDown(false);\r\n    }\r\n\r\n    const toggleNestedDropDown = () => {\r\n        setShowNestedDropDown((oldValue) => {\r\n            return !oldValue;\r\n        })\r\n    }\r\n\r\n    const toggleDropDown = () => {\r\n        setShowDropDown((oldValue) => {\r\n            return !oldValue;\r\n        })\r\n    }\r\n\r\n    const handleLoginWithProps = (googleData) => {\r\n        handleLogin(googleData, props.updateUser);\r\n    }\r\n\r\n\r\n    //TODO: Move this part to App.js\r\n    useEffect(() => {\r\n        let access_token = localStorage.getItem(ACCESS_TOKEN);\r\n\r\n        //if token is present, then maybe we should try to validate the token and log in\r\n        if (!props.isLoggedIn && access_token) {\r\n            validateTokenAndLogin(access_token, props.updateUser);\r\n        }\r\n    }, []);\r\n\r\n\r\n    useEffect(() => {\r\n        console.log(\"showDropdown changed\");\r\n        const checkIfClickedOutside = e => {\r\n            // If the menu is open and the clicked target is not within the menu,\r\n            // then close the menu\r\n            console.log(\"ref.current\", ref.current);\r\n            console.log(\"e.target\", e.target);\r\n            if (showDropdown && ref.current && !ref.current.contains(e.target)) {\r\n                console.log(\"call the dropdown\");\r\n                closeDropDown();\r\n            }\r\n        }\r\n\r\n        document.addEventListener(\"mousedown\", checkIfClickedOutside)\r\n\r\n        return () => {\r\n            // Cleanup the event listener\r\n            document.removeEventListener(\"mousedown\", checkIfClickedOutside)\r\n        }\r\n    }, [showDropdown]);\r\n\r\n    const newLocation = { pathname: \"/register\", state: { fromDashboard: true } };\r\n    //console.log(\"**** The google API key is\" + process.env.REACT_APP_GOOGLE_API_KEY);\r\n    return (\r\n        <>\r\n            <nav className=\" navbar-expand-lg fixed-top navbar-light bg-light\">\r\n                <div className=\"container-fluid\">\r\n                        <Link to=\"/\">\r\n                            {/* <img src={logo} className=\"logo-image img-fluid\" alt=\"Stammerers Connect\" /> */}\r\n                            <div className='navbar-caption ms-5'>STAMMERERS CONNECT</div>\r\n                        </Link>\r\n                    <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                        <span className=\"navbar-toggler-icon\"></span>\r\n                    </button>\r\n                    <div className=\"collapse navbar-collapse justify-content-end me-5\" id=\"navbarSupportedContent\">\r\n                        <ul className=\"navbar-nav\">\r\n                            <li className=\"nav-item\">\r\n                                <Link to=\"/\" className='navbar-caption-text' onClick={closeDropDown}>About</Link>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <Link to=\"/\" className='navbar-caption-text' onClick={closeDropDown}>About</Link>\r\n                            </li>\r\n                            <li className=\"nav-item dropdown\">\r\n                                <Link to=\"/\" className='navbar-caption-text' onClick={closeDropDown}>About</Link>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n        </>\r\n    )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}