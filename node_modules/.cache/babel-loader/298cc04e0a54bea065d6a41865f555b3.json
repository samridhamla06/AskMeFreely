{"ast":null,"code":"import _slicedToArray from \"E:\\\\WORK\\\\RAW_Downloads\\\\AskMeFreely\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\WORK\\\\RAW_Downloads\\\\AskMeFreely\\\\src\\\\MyComponents\\\\Header.js\";\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useLocation } from \"react-router\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { ACCESS_TOKEN, GOOGLE_AUTH_URL, LOGGED_IN_NAME, LOGGED_IN_EMAIL } from \"../constants/url\";\nimport GoogleLogin from \"react-google-login\";\nimport { useMediaQuery } from \"react-responsive\";\nimport logo from \"../assets/img/logo.png\";\nimport { handleLogin, handleLoginFailure, validateTokenAndLogin, handleLogout } from \"../utils/UserLoginUtils\";\nexport var Header = function Header(props) {\n  var ref = useRef();\n  var isMobile = useMediaQuery({\n    query: \"(max-width: 600px)\"\n  });\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showDropdown = _useState2[0],\n      setShowDropDown = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showNestedDropdown = _useState4[0],\n      setShowNestedDropDown = _useState4[1];\n\n  var closeDropDown = function closeDropDown() {\n    setShowNestedDropDown(false);\n    setShowDropDown(false);\n  };\n\n  var toggleNestedDropDown = function toggleNestedDropDown() {\n    setShowNestedDropDown(function (oldValue) {\n      return !oldValue;\n    });\n    setShowDropDown(false);\n  };\n\n  var toggleDropDown = function toggleDropDown() {\n    setShowDropDown(function (oldValue) {\n      return !oldValue;\n    });\n  };\n\n  var handleLoginWithProps = function handleLoginWithProps(googleData) {\n    handleLogin(googleData, props.updateUser);\n  }; //TODO: Move this part to App.js\n\n\n  useEffect(function () {\n    var access_token = localStorage.getItem(ACCESS_TOKEN); //if token is present, then maybe we should try to validate the token and log in\n\n    if (!props.isLoggedIn && access_token) {\n      validateTokenAndLogin(access_token, props.updateUser);\n    }\n  }, []);\n  useEffect(function () {\n    console.log(\"showDropdown changed\");\n\n    var checkIfClickedOutside = function checkIfClickedOutside(e) {\n      // If the menu is open and the clicked target is not within the menu,\n      // then close the menu\n      console.log(\"ref.current\", ref.current);\n      console.log(\"e.target\", e.target);\n\n      if (showDropdown && ref.current && !ref.current.contains(e.target)) {\n        console.log(\"call the dropdown\");\n        closeDropDown();\n      }\n    };\n\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\n    return function () {\n      // Cleanup the event listener\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\n    };\n  }, [showDropdown]);\n  var newLocation = {\n    pathname: \"/register\",\n    state: {\n      fromDashboard: true\n    }\n  }; //console.log(\"**** The google API key is\" + process.env.REACT_APP_GOOGLE_API_KEY);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"nav\", {\n    id: \"header\",\n    className: \"navbar navbar-expand-lg fixed-top navbar-light bg-white border-bottom border-secondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    className: \"navbar-brand\",\n    alt: \"Stammerers Connect\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"navbar-toggler\",\n    type: \"button\",\n    \"data-bs-toggle\": \"offcanvas\",\n    \"data-bs-target\": \"#offcanvasRight\",\n    \"aria-controls\": \"offcanvasRight\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"navbar-toggler-icon\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"offcanvas offcanvas-end\",\n    tabindex: \"-1\",\n    id: \"offcanvasRight\",\n    \"aria-labelledby\": \"offcanvasRightLabel\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"offcanvas-header\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn-close text-reset\",\n    \"data-bs-dismiss\": \"offcanvas\",\n    \"aria-label\": \"Close\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"offcanvas-body justify-content-end me-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"navbar-nav\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    \"data-bs-dismiss\": \"offcanvas\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"navbar-caption-text text-dark\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  }, \"Home\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    \"data-bs-dismiss\": \"offcanvas\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/mentors\",\n    className: \"navbar-caption-text text-dark\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 19\n    }\n  }, \"Mentors\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    \"data-bs-dismiss\": \"offcanvas\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/events\",\n    className: \"navbar-caption-text text-dark\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 19\n    }\n  }, \"Events\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    \"data-bs-dismiss\": \"offcanvas\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/contactUs\",\n    className: \"navbar-caption-text text-dark\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 19\n    }\n  }, \"Contact\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    \"data-bs-dismiss\": \"offcanvas\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 19\n    }\n  }, props.isLoggedIn && props.user ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"myButton scrollto\",\n    onClick: toggleNestedDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    class: \"fa fa-user\",\n    \"aria-hidden\": \"true\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 27\n    }\n  }), \" \", props.user && props.user.name ? \"Hi, \" + props.user.name.split(\" \")[0] : \"Hi, User\"), showNestedDropdown ? /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"navbar-submenu\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: newLocation,\n    className: \"navbar-caption-text\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 31\n    }\n  }, \"My Profile\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: \"/sessions\"\n    },\n    className: \"navbar-caption-text\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 31\n    }\n  }, \"My Sessions\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    onClick: function onClick() {\n      handleLogout(props.updateUser);\n      closeDropDown();\n    },\n    className: \"navbar-caption-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 31\n    }\n  }, \"Log Out\"))) : /*#__PURE__*/React.createElement(React.Fragment, null)) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GoogleLogin, {\n    render: function render(renderProps) {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        onClick: renderProps.onClick,\n        disabled: renderProps.disabled,\n        className: \"navbar-button\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        class: \"bi bi-google\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 31\n        }\n      }), \" Log In\");\n    },\n    clientId: process.env.REACT_APP_GOOGLE_API_KEY,\n    buttonText: \"Log In\",\n    onSuccess: handleLoginWithProps,\n    onFailure: handleLoginFailure,\n    cookiePolicy: \"single_host_origin\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 25\n    }\n  }))))))))));\n};","map":{"version":3,"sources":["E:/WORK/RAW_Downloads/AskMeFreely/src/MyComponents/Header.js"],"names":["React","useEffect","useState","useRef","useLocation","useNavigate","Link","ACCESS_TOKEN","GOOGLE_AUTH_URL","LOGGED_IN_NAME","LOGGED_IN_EMAIL","GoogleLogin","useMediaQuery","logo","handleLogin","handleLoginFailure","validateTokenAndLogin","handleLogout","Header","props","ref","isMobile","query","showDropdown","setShowDropDown","showNestedDropdown","setShowNestedDropDown","closeDropDown","toggleNestedDropDown","oldValue","toggleDropDown","handleLoginWithProps","googleData","updateUser","access_token","localStorage","getItem","isLoggedIn","console","log","checkIfClickedOutside","e","current","target","contains","document","addEventListener","removeEventListener","newLocation","pathname","state","fromDashboard","position","user","name","split","renderProps","onClick","disabled","process","env","REACT_APP_GOOGLE_API_KEY"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useLocation } from \"react-router\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport {\r\n  ACCESS_TOKEN,\r\n  GOOGLE_AUTH_URL,\r\n  LOGGED_IN_NAME,\r\n  LOGGED_IN_EMAIL,\r\n} from \"../constants/url\";\r\nimport GoogleLogin from \"react-google-login\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport logo from \"../assets/img/logo.png\";\r\nimport {\r\n  handleLogin,\r\n  handleLoginFailure,\r\n  validateTokenAndLogin,\r\n  handleLogout,\r\n} from \"../utils/UserLoginUtils\";\r\n\r\nexport const Header = (props) => {\r\n  const ref = useRef();\r\n  const isMobile = useMediaQuery({ query: `(max-width: 600px)` });\r\n  const [showDropdown, setShowDropDown] = useState(false);\r\n  const [showNestedDropdown, setShowNestedDropDown] = useState(false);\r\n\r\n  const closeDropDown = () => {\r\n    setShowNestedDropDown(false);\r\n    setShowDropDown(false);\r\n  };\r\n\r\n  const toggleNestedDropDown = () => {\r\n    setShowNestedDropDown((oldValue) => {\r\n      return !oldValue;\r\n    });\r\n    setShowDropDown(false);\r\n  };\r\n\r\n  const toggleDropDown = () => {\r\n    setShowDropDown((oldValue) => {\r\n      return !oldValue;\r\n    });\r\n  };\r\n\r\n  const handleLoginWithProps = (googleData) => {\r\n    handleLogin(googleData, props.updateUser);\r\n  };\r\n\r\n  //TODO: Move this part to App.js\r\n  useEffect(() => {\r\n    let access_token = localStorage.getItem(ACCESS_TOKEN);\r\n\r\n    //if token is present, then maybe we should try to validate the token and log in\r\n    if (!props.isLoggedIn && access_token) {\r\n      validateTokenAndLogin(access_token, props.updateUser);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"showDropdown changed\");\r\n    const checkIfClickedOutside = (e) => {\r\n      // If the menu is open and the clicked target is not within the menu,\r\n      // then close the menu\r\n      console.log(\"ref.current\", ref.current);\r\n      console.log(\"e.target\", e.target);\r\n      if (showDropdown && ref.current && !ref.current.contains(e.target)) {\r\n        console.log(\"call the dropdown\");\r\n        closeDropDown();\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n\r\n    return () => {\r\n      // Cleanup the event listener\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [showDropdown]);\r\n\r\n  const newLocation = { pathname: \"/register\", state: { fromDashboard: true } };\r\n  //console.log(\"**** The google API key is\" + process.env.REACT_APP_GOOGLE_API_KEY);\r\n  return (\r\n    <>\r\n      <nav\r\n        id=\"header\"\r\n        className=\"navbar navbar-expand-lg fixed-top navbar-light bg-white border-bottom border-secondary\"\r\n      >\r\n        <div className=\"container-fluid\">\r\n          <Link to=\"/\">\r\n            <img src={logo} className=\"navbar-brand\" alt=\"Stammerers Connect\" />\r\n          </Link>\r\n          <button\r\n            className=\"navbar-toggler\"\r\n            type=\"button\"\r\n            data-bs-toggle=\"offcanvas\"\r\n            data-bs-target=\"#offcanvasRight\"\r\n            aria-controls=\"offcanvasRight\"\r\n          >\r\n            <span className=\"navbar-toggler-icon\"></span>\r\n          </button>\r\n\r\n          {/* <button className=\"navbar-toggler \" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                        <span className=\"navbar-toggler-icon\"></span>\r\n                    </button> */}\r\n          {/* <div className=\"collapse navbar-collapse justify-content-end me-5\" id=\"navbarSupportedContent\">\r\n                        <ul className=\"navbar-nav\">\r\n                            <li className=\"nav-item\">\r\n                                <Link to=\"/\" className='navbar-caption-text text-dark' onClick={closeDropDown}>About</Link>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <Link to=\"/mentors\" className='navbar-caption-text text-dark' onClick={closeDropDown}>Mentors</Link>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <Link to=\"/events\" className='navbar-caption-text text-dark' onClick={closeDropDown}>Events</Link>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <Link to=\"/contactUs\" className='navbar-caption-text text-dark' onClick={closeDropDown}>Contact</Link>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <Link to=\"/SignUp\" className='navbar-caption-text text-dark' onClick={closeDropDown}>Sign Up</Link>\r\n                            </li>\r\n                        </ul>\r\n                    </div> */}\r\n\r\n          <div\r\n            class=\"offcanvas offcanvas-end\"\r\n            tabindex=\"-1\"\r\n            id=\"offcanvasRight\"\r\n            aria-labelledby=\"offcanvasRightLabel\"\r\n          >\r\n            <div class=\"offcanvas-header\">\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn-close text-reset\"\r\n                data-bs-dismiss=\"offcanvas\"\r\n                aria-label=\"Close\"\r\n              ></button>\r\n            </div>\r\n            <div class=\"offcanvas-body justify-content-end me-5\">\r\n              <ul className=\"navbar-nav\">\r\n                <li className=\"nav-item\" data-bs-dismiss=\"offcanvas\">\r\n                  <Link\r\n                    to=\"/\"\r\n                    className=\"navbar-caption-text text-dark\"\r\n                    onClick={closeDropDown}\r\n                  >\r\n                    Home\r\n                  </Link>\r\n                </li>\r\n                <li className=\"nav-item\" data-bs-dismiss=\"offcanvas\">\r\n                  <Link\r\n                    to=\"/mentors\"\r\n                    className=\"navbar-caption-text text-dark\"\r\n                    onClick={closeDropDown}\r\n                  >\r\n                    Mentors\r\n                  </Link>\r\n                </li>\r\n                <li className=\"nav-item\" data-bs-dismiss=\"offcanvas\">\r\n                  <Link\r\n                    to=\"/events\"\r\n                    className=\"navbar-caption-text text-dark\"\r\n                    onClick={closeDropDown}\r\n                  >\r\n                    Events\r\n                  </Link>\r\n                </li>\r\n                <li className=\"nav-item\" data-bs-dismiss=\"offcanvas\">\r\n                  <Link\r\n                    to=\"/contactUs\"\r\n                    className=\"navbar-caption-text text-dark\"\r\n                    onClick={closeDropDown}\r\n                  >\r\n                    Contact\r\n                  </Link>\r\n                </li>\r\n                <li className=\"nav-item\" data-bs-dismiss=\"offcanvas\">\r\n                  {/* <Link to=\"/SignUp\" className='navbar-caption-text text-dark' onClick={closeDropDown}>Sign Up</Link> */}\r\n                  <div style={{ position: \"relative\" }}>\r\n                    {props.isLoggedIn && props.user ? (\r\n                      <>\r\n                        <button\r\n                          className=\"myButton scrollto\"\r\n                          onClick={toggleNestedDropDown}\r\n                        >\r\n                          <i class=\"fa fa-user\" aria-hidden=\"true\"></i>{\" \"}\r\n                          {props.user && props.user.name\r\n                            ? \"Hi, \" + props.user.name.split(\" \")[0]\r\n                            : \"Hi, User\"}\r\n                        </button>\r\n                        {showNestedDropdown ? (\r\n                          <ul className=\"navbar-submenu\">\r\n                            <li>\r\n                              <Link\r\n                                to={newLocation}\r\n                                className=\"navbar-caption-text\"\r\n                                onClick={closeDropDown}\r\n                              >\r\n                                My Profile\r\n                              </Link>\r\n                            </li>\r\n                            <li>\r\n                              <Link\r\n                                to={{ pathname: \"/sessions\" }}\r\n                                className=\"navbar-caption-text\"\r\n                                onClick={closeDropDown}\r\n                              >\r\n                                My Sessions\r\n                              </Link>\r\n                            </li>\r\n                            <li>\r\n                              <Link\r\n                                to=\"/\"\r\n                                onClick={() => {\r\n                                  handleLogout(props.updateUser);\r\n                                  closeDropDown();\r\n                                }}\r\n                                className=\"navbar-caption-text\"\r\n                              >\r\n                                Log Out\r\n                              </Link>\r\n                            </li>\r\n                          </ul>\r\n                        ) : (\r\n                          <></>\r\n                        )}\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <GoogleLogin\r\n                          render={(renderProps) => (\r\n                            <button\r\n                              onClick={renderProps.onClick}\r\n                              disabled={renderProps.disabled}\r\n                              className=\"navbar-button\"\r\n                            >\r\n                              <i class=\"bi bi-google\"></i> Log In\r\n                            </button>\r\n                          )}\r\n                          clientId={process.env.REACT_APP_GOOGLE_API_KEY}\r\n                          buttonText=\"Log In\"\r\n                          onSuccess={handleLoginWithProps}\r\n                          onFailure={handleLoginFailure}\r\n                          cookiePolicy={\"single_host_origin\"}\r\n                        />\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}