{"ast":null,"code":"import _slicedToArray from \"/Users/samridhamla/Downloads/AskMeFreely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _readOnlyError from \"/Users/samridhamla/Downloads/AskMeFreely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/readOnlyError\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/samridhamla/Downloads/AskMeFreely/src/MyComponents/MentorProfile.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport { ACCESS_TOKEN, BOOK_SESSION_URL, LOGGED_IN_EMAIL, LOGGED_IN_NAME, GET_REVIEW_URL } from '../constants/url';\nimport Modal from 'react-bootstrap/Modal';\nimport { STAMMERING_STATUS_MAP, RATING_MAP } from '../constants/map';\nimport swal from 'sweetalert';\nimport Rating from 'react-rating';\nimport { checkTokenFromResponse } from '../utils/UserLoginUtils';\nexport var MentorProfile = function MentorProfile(props) {\n  useEffect(function () {\n    window.scrollTo(0, 0);\n  }, []);\n  var navigate = useNavigate();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showPrompt = _useState2[0],\n      setShowPrompt = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showSpinner = _useState4[0],\n      setShowSpinner = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      reviews = _useState6[0],\n      setReviews = _useState6[1];\n\n  console.log(props.mentorObj);\n  var location = useLocation();\n\n  if (!location.state) {\n    //redirect to home page\n    navigate(\"/\", {\n      replace: true\n    });\n  }\n\n  var mentorObj = location.state.mentorObj;\n\n  if (!mentorObj) {\n    props.dummmyMentorListObj, _readOnlyError(\"mentorObj\");\n  }\n\n  var sendMessage = function sendMessage(event) {\n    event.preventDefault();\n    var access_token = localStorage.getItem(ACCESS_TOKEN);\n    var from_email = localStorage.getItem(LOGGED_IN_EMAIL);\n\n    if (!access_token) {\n      swal(\"Oops!\", \"Please login to Book\", \"error\");\n      setShowPrompt(false);\n      return;\n    }\n\n    if (from_email === mentorObj.email) {\n      swal(\"Oops!\", \"You can't book session with yourself\", \"error\");\n      setShowPrompt(false);\n      return;\n    }\n\n    var requestBody = {\n      message: event.target.story.value,\n      menteeId: from_email,\n      mentorId: mentorObj.email\n    };\n    var requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'authorization': access_token\n      },\n      body: JSON.stringify(requestBody)\n    };\n    setShowSpinner(true);\n    fetch(BOOK_SESSION_URL, requestOptions).then(function (response) {\n      return response.json();\n    }).then(function (response) {\n      if (response.status == 'Successfully Saved') {\n        swal(\"Awesome!\", \"Session Booked Successfully\", \"success\");\n      } else {\n        var message = response.errorCode ? response.errorMessage : 'ERROR OCCURED, TRY AGAIN';\n\n        if (checkTokenFromResponse(response, props.updateUser)) {\n          return;\n        } else {\n          swal(\"Oops!\", message, \"error\");\n        }\n      }\n    }).catch(function (err) {\n      console.log(err);\n    }).finally(function () {\n      setShowSpinner(false);\n      setShowPrompt(false);\n    });\n  };\n\n  useEffect(function () {\n    //API call to fetch user info\n    fetch(GET_REVIEW_URL + \"/?emailId=\" + mentorObj.email, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (response) {\n      console.log('Reviews received from Backend', response);\n      setReviews(response);\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }, []); //let broValue = query.get(\"bro\")\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pt-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, showPrompt && /*#__PURE__*/React.createElement(Modal, {\n    size: \"lg\",\n    \"aria-labelledby\": \"contained-modal-title-vcenter\",\n    style: {\n      opacity: 1,\n      display: 'block',\n      alignContent: 'center'\n    },\n    show: true,\n    onHide: function onHide() {\n      return setShowPrompt(false);\n    },\n    centered: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    id: \"contained-modal-title-vcenter\",\n    style: {\n      fontWeight: '700',\n      marginBottom: '5px',\n      fontSize: '20px',\n      color: '#012970',\n      alignContent: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, \"Book Session\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 25\n    }\n  }, \"This will generate an email communication between you and \", mentorObj.name, \", so that we can book a 1:1 session online.\"), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, \"Briefly explain what do you expect from this 1:1 session\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: sendMessage,\n    className: \"d-flex flex-column justify-content-center align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group align-self-stretch\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"form-control\",\n    id: \"story\",\n    rows: \"6\",\n    width: \"100%\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"myButton mt-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }, showSpinner ? /*#__PURE__*/React.createElement(\"span\", {\n    class: \"spinner-border spinner-border-sm\",\n    role: \"status\",\n    \"aria-hidden\": \"true\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 37\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, \"Send\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex flex-column bg-white justify-content-center align-items-stretch m-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-item m-2 d-flex\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-grow-1 mentor-profile-container d-flex flex justify-content-evenly border border-light text-center p-2 flex-wrap\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: mentorObj.imageURL,\n    alt: \"avatar\",\n    className: \"my-profile-image img-fluid d-block align-self-start m-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex flex-column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"name-caption mt-3 mb-3 mx-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 29\n    }\n  }, \"Hello, I am \", mentorObj.name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-muted mb-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 29\n    }\n  }, mentorObj.tagLine ? STAMMERING_STATUS_MAP.get(mentorObj.tagLine) : \"Fellow Stammerer\"), mentorObj.location ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-muted mb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 51\n    }\n  }, mentorObj.location, \" \") : /*#__PURE__*/React.createElement(React.Fragment, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"myButton mb-1 align-self-center\",\n    onClick: function onClick() {\n      return setShowPrompt(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    class: \"fa fa-meetup\",\n    \"aria-hidden\": \"true\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 135\n    }\n  }), \" Book Session\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mentor-profile-container flex-item border border-light m-2 p-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 21\n    }\n  }, \"My Journey\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-muted mb-1 p-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  }, mentorObj.story)), mentorObj.tip && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mentor-profile-container flex-item border border-light m-2 p-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 29\n    }\n  }, \"How can I help ?\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-muted mb-1 p-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  }, mentorObj.tip)), reviews.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mentor-profile-container flex-item border border-light m-2 p-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 25\n    }\n  }, \"My Reviews\"), reviews.map(function (reviewObj, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card m-1\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-body\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"blockquote\", {\n      class: \"blockquote mb-0\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Rating, {\n      emptySymbol: \"fa fa-star-o\",\n      fullSymbol: \"fa fa-star checked\",\n      readonly: \"true\",\n      initialRating: reviewObj.actualRating,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-muted\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 41\n      }\n    }, reviewObj.review), /*#__PURE__*/React.createElement(\"footer\", {\n      class: \"blockquote-footer\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"cite\", {\n      title: \"Source Title\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 75\n      }\n    }, reviewObj.reviewerName)))));\n  })))));\n};\nMentorProfile.defaultProps = {\n  dummmyMentorListObj: [{\n    name: \"Dummy\",\n    age: \"28\",\n    story: \"Started my journey 20 years ago, still struggling.\",\n    imageURL: \"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp\"\n  }]\n};","map":{"version":3,"sources":["/Users/samridhamla/Downloads/AskMeFreely/src/MyComponents/MentorProfile.js"],"names":["React","useState","useEffect","useParams","useLocation","useNavigate","ACCESS_TOKEN","BOOK_SESSION_URL","LOGGED_IN_EMAIL","LOGGED_IN_NAME","GET_REVIEW_URL","Modal","STAMMERING_STATUS_MAP","RATING_MAP","swal","Rating","checkTokenFromResponse","MentorProfile","props","window","scrollTo","navigate","showPrompt","setShowPrompt","showSpinner","setShowSpinner","reviews","setReviews","console","log","mentorObj","location","state","replace","dummmyMentorListObj","sendMessage","event","preventDefault","access_token","localStorage","getItem","from_email","email","requestBody","message","target","story","value","menteeId","mentorId","requestOptions","method","headers","body","JSON","stringify","fetch","then","response","json","status","errorCode","errorMessage","updateUser","catch","err","finally","opacity","display","alignContent","fontWeight","marginBottom","fontSize","color","name","imageURL","tagLine","get","tip","length","map","reviewObj","index","actualRating","review","reviewerName","defaultProps","age"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useLocation,useNavigate } from 'react-router-dom';\r\nimport { ACCESS_TOKEN, BOOK_SESSION_URL, LOGGED_IN_EMAIL, LOGGED_IN_NAME, GET_REVIEW_URL } from '../constants/url';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport { STAMMERING_STATUS_MAP, RATING_MAP } from '../constants/map';\r\nimport swal from 'sweetalert';\r\nimport Rating from 'react-rating'\r\nimport { checkTokenFromResponse } from '../utils/UserLoginUtils';\r\n\r\nexport const MentorProfile = (props) => {\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n      }, [])\r\n\r\n      let navigate = useNavigate();\r\n\r\n    const [showPrompt, setShowPrompt] = useState(false);\r\n    const [showSpinner, setShowSpinner] = useState(false);\r\n    const [reviews, setReviews] = useState([]);\r\n\r\n    console.log(props.mentorObj);\r\n\r\n    const location = useLocation();\r\n    if(!location.state){\r\n        //redirect to home page\r\n        navigate(\"/\", { replace: true });\r\n    }\r\n    const mentorObj = location.state.mentorObj;\r\n    if (!mentorObj) {\r\n        mentorObj = props.dummmyMentorListObj;\r\n    }\r\n\r\n    const sendMessage = (event) => {\r\n        event.preventDefault();\r\n        let access_token = localStorage.getItem(ACCESS_TOKEN);\r\n        let from_email = localStorage.getItem(LOGGED_IN_EMAIL);\r\n\r\n        if (!access_token) {\r\n            swal(\"Oops!\", \"Please login to Book\", \"error\");\r\n            setShowPrompt(false);\r\n            return;\r\n        }\r\n\r\n        if(from_email === mentorObj.email){\r\n            swal(\"Oops!\", \"You can't book session with yourself\", \"error\");\r\n            setShowPrompt(false);\r\n            return;\r\n        }\r\n\r\n        const requestBody = {\r\n            message: event.target.story.value,\r\n            menteeId: from_email,\r\n            mentorId: mentorObj.email\r\n        };\r\n\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json', 'authorization': access_token },\r\n            body: JSON.stringify(requestBody)\r\n        };\r\n\r\n        setShowSpinner(true);\r\n\r\n        fetch(BOOK_SESSION_URL, requestOptions)\r\n            .then(response => response.json())\r\n            .then(response => {\r\n                if (response.status == 'Successfully Saved') {\r\n                    swal(\"Awesome!\", \"Session Booked Successfully\", \"success\");\r\n                } else {\r\n                    let message = response.errorCode ? response.errorMessage : 'ERROR OCCURED, TRY AGAIN';\r\n                    if(checkTokenFromResponse(response, props.updateUser)){\r\n                        return;                  \r\n                    }else{\r\n                        swal(\"Oops!\", message, \"error\");\r\n                    }                \r\n                }\r\n            })\r\n            .catch(\r\n                err => {\r\n                    console.log(err);\r\n                })\r\n            .finally(() => {\r\n                setShowSpinner(false);\r\n                setShowPrompt(false);\r\n            });\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        //API call to fetch user info\r\n        fetch(GET_REVIEW_URL + \"/?emailId=\" + mentorObj.email,\r\n            { method: 'GET', headers: { 'Content-Type': 'application/json' } })\r\n            .then(response => response.json())\r\n            .then(response => {\r\n                console.log('Reviews received from Backend', response);\r\n                setReviews(response);\r\n            })\r\n            .catch(\r\n                err => {\r\n                    console.log(err);\r\n                });\r\n    }, [])\r\n\r\n    //let broValue = query.get(\"bro\")\r\n    return (\r\n        <div className='pt-5'>\r\n            <div className=\"mt-5\">\r\n            {showPrompt &&\r\n                <Modal\r\n                    size=\"lg\"\r\n                    aria-labelledby=\"contained-modal-title-vcenter\"\r\n                    style={{ opacity: 1, display: 'block', alignContent: 'center' }}\r\n                    show={true}\r\n                    onHide={() => setShowPrompt(false)}\r\n                    centered>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title id=\"contained-modal-title-vcenter\" style={{ fontWeight: '700', marginBottom: '5px', fontSize: '20px', color: '#012970', alignContent: 'center' }}>\r\n                            Book Session\r\n                        </Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        {/* <h4 className='name-caption'>Book a Mentoring session with {mentorObj.name}</h4> */}\r\n                        <p>\r\n                            This will generate an email communication between you and {mentorObj.name}, so that we can book a 1:1 session online.\r\n                        </p>\r\n                        <h4>Briefly explain what do you expect from this 1:1 session</h4>\r\n                        <form onSubmit={sendMessage} className='d-flex flex-column justify-content-center align-items-center'>\r\n                            <div className=\"form-group align-self-stretch\">\r\n                                <textarea className=\"form-control\" id=\"story\" rows=\"6\" width='100%'></textarea>\r\n                            </div>\r\n                            <button type=\"submit\" className=\"myButton mt-2\">\r\n                                {showSpinner ?\r\n                                    <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                    :\r\n                                    <>Send</>}\r\n                            </button>\r\n                        </form>\r\n                    </Modal.Body>\r\n                </Modal>\r\n            }\r\n\r\n            <div className=\"d-flex flex-column bg-white justify-content-center align-items-stretch m-1\">\r\n                <div className='flex-item m-2 d-flex'>\r\n                    {/* 1st Row begins */}\r\n                    <div className='flex-grow-1 mentor-profile-container d-flex flex justify-content-evenly border border-light text-center p-2 flex-wrap'>\r\n                        <img src={mentorObj.imageURL} alt=\"avatar\" className=\"my-profile-image img-fluid d-block align-self-start m-4\" />\r\n                        <div className='d-flex flex-column'>\r\n                            <h5 className='name-caption mt-3 mb-3 mx-5'>Hello, I am {mentorObj.name}</h5>\r\n                            <p className=\"text-muted mb-1\">{mentorObj.tagLine ? STAMMERING_STATUS_MAP.get(mentorObj.tagLine) : \"Fellow Stammerer\"}</p>\r\n                            {mentorObj.location ? <p className=\"text-muted mb-4\">{mentorObj.location} </p> : <></>}\r\n                            <div className='d-flex justify-content-center'>\r\n                                <button type=\"button\" className=\"myButton mb-1 align-self-center\" onClick={() => setShowPrompt(true)}><i class=\"fa fa-meetup\" aria-hidden=\"true\"></i> Book Session</button>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div className='mentor-profile-container flex-item border border-light m-2 p-2'>\r\n                    <h4>My Journey</h4>\r\n                    <p className=\"text-muted mb-1 p-1\">{mentorObj.story}</p>\r\n                </div>\r\n\r\n                {\r\n                    mentorObj.tip && (\r\n                        <div className='mentor-profile-container flex-item border border-light m-2 p-2'>\r\n                            <h4>How can I help ?</h4>\r\n                            <p className=\"text-muted mb-1 p-1\">{mentorObj.tip}</p>\r\n                        </div>)\r\n                }\r\n\r\n                {reviews.length > 0 &&\r\n                    <div className='mentor-profile-container flex-item border border-light m-2 p-2'>\r\n                        <h4>My Reviews</h4>\r\n                        {reviews.map((reviewObj, index) => {\r\n                            return (<div class=\"card m-1\">\r\n                                <div class=\"card-body\">\r\n                                    <blockquote class=\"blockquote mb-0\">\r\n                                        <Rating\r\n                                            emptySymbol=\"fa fa-star-o\"\r\n                                            fullSymbol=\"fa fa-star checked\"\r\n                                            readonly = \"true\"\r\n                                            initialRating={reviewObj.actualRating}\r\n                                        />\r\n                                        <p className='text-muted'>{reviewObj.review}</p>\r\n                                        <footer class=\"blockquote-footer\"><cite title=\"Source Title\">{reviewObj.reviewerName}</cite></footer>\r\n                                    </blockquote>\r\n                                </div>\r\n                            </div>)\r\n                        })}\r\n                    </div>\r\n                }\r\n            </div>\r\n\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nMentorProfile.defaultProps = {\r\n    dummmyMentorListObj: [\r\n        {\r\n            name: \"Dummy\",\r\n            age: \"28\",\r\n            story: \"Started my journey 20 years ago, still struggling.\",\r\n            imageURL: \"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp\"\r\n        }\r\n    ]\r\n}\r\n"]},"metadata":{},"sourceType":"module"}