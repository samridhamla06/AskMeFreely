{"ast":null,"code":"import _slicedToArray from \"D:\\\\Clients Projects\\\\AskMeFreely\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Clients Projects\\\\AskMeFreely\\\\src\\\\MyComponents\\\\Header.js\";\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useLocation } from 'react-router';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { ACCESS_TOKEN, GOOGLE_AUTH_URL, LOGGED_IN_NAME, LOGGED_IN_EMAIL } from '../constants/url';\nimport GoogleLogin from 'react-google-login';\nimport { useMediaQuery } from 'react-responsive';\nimport { handleLogin, handleLoginFailure, validateTokenAndLogin, handleLogout } from '../utils/UserLoginUtils';\nexport var Header = function Header(props) {\n  var ref = useRef();\n  var isMobile = useMediaQuery({\n    query: \"(max-width: 900px)\"\n  });\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showDropdown = _useState2[0],\n      setShowDropDown = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showNestedDropdown = _useState4[0],\n      setShowNestedDropDown = _useState4[1];\n\n  var closeDropDown = function closeDropDown() {\n    setShowNestedDropDown(false);\n    setShowDropDown(false);\n  };\n\n  var toggleNestedDropDown = function toggleNestedDropDown() {\n    setShowNestedDropDown(function (oldValue) {\n      return !oldValue;\n    });\n  };\n\n  var toggleDropDown = function toggleDropDown() {\n    setShowDropDown(function (oldValue) {\n      return !oldValue;\n    });\n  };\n\n  var handleLoginWithProps = function handleLoginWithProps(googleData) {\n    handleLogin(googleData, props.updateUser);\n  }; //TODO: Move this part to App.js\n\n\n  useEffect(function () {\n    var access_token = localStorage.getItem(ACCESS_TOKEN); //if token is present, then maybe we should try to validate the token and log in\n\n    if (!props.isLoggedIn && access_token) {\n      validateTokenAndLogin(access_token, props.updateUser);\n    }\n  }, []);\n  useEffect(function () {\n    console.log(\"showDropdown changed\");\n\n    var checkIfClickedOutside = function checkIfClickedOutside(e) {\n      // If the menu is open and the clicked target is not within the menu,\n      // then close the menu\n      console.log(\"ref.current\", ref.current);\n      console.log(\"e.target\", e.target);\n\n      if (showDropdown && ref.current && !ref.current.contains(e.target)) {\n        console.log(\"call the dropdown\");\n        closeDropDown();\n      }\n    };\n\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\n    return function () {\n      // Cleanup the event listener\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\n    };\n  }, [showDropdown]);\n  var newLocation = {\n    pathname: \"/register\",\n    state: {\n      fromDashboard: true\n    }\n  }; //console.log(\"**** The google API key is\" + process.env.REACT_APP_GOOGLE_API_KEY);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"header\",\n    className: \"header fixed-top\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navbar-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navbar-caption\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 29\n    }\n  }, \"STAMMERERS CONNECT\"))), (!isMobile || showDropdown) && /*#__PURE__*/React.createElement(\"div\", {\n    id: \"navbar\",\n    className: \"navbar\",\n    ref: ref,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"navbar-caption-text\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 37\n    }\n  }, \"About\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/mentors\",\n    className: \"navbar-caption-text\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 37\n    }\n  }, \"Mentors\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/events\",\n    className: \"navbar-caption-text\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 37\n    }\n  }, \"Events\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/contactUs\",\n    className: \"navbar-caption-text\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 37\n    }\n  }, \"Contact\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 37\n    }\n  }, props.isLoggedIn && props.user ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"myButton scrollto\",\n    onClick: toggleNestedDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    class: \"fa fa-user\",\n    \"aria-hidden\": \"true\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 123\n    }\n  }), \" \", props.user && props.user.name ? \"Hi, \" + props.user.name.split(' ')[0] : 'Hi, User'), showNestedDropdown ? /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"navbar-submenu\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 57\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 61\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: newLocation,\n    className: \"navbar-caption-text\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 65\n    }\n  }, \"My Profile\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 61\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: \"/sessions\"\n    },\n    className: \"navbar-caption-text\",\n    onClick: closeDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 65\n    }\n  }, \"My Sessions\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 61\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    onClick: function onClick() {\n      handleLogout(props.updateUser);\n      closeDropDown();\n    },\n    className: \"navbar-caption-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 65\n    }\n  }, \"Log Out\"))) : /*#__PURE__*/React.createElement(React.Fragment, null)) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GoogleLogin, {\n    render: function render(renderProps) {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        onClick: renderProps.onClick,\n        disabled: renderProps.disabled,\n        className: \"navbar-button\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 65\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        class: \"bi bi-google\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 162\n        }\n      }), \" Log In\");\n    },\n    clientId: process.env.REACT_APP_GOOGLE_API_KEY,\n    buttonText: \"Log In\",\n    onSuccess: handleLoginWithProps,\n    onFailure: handleLoginFailure,\n    cookiePolicy: 'single_host_origin',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 53\n    }\n  })))))), isMobile && /*#__PURE__*/React.createElement(\"button\", {\n    className: \"myButton\",\n    onClick: toggleDropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 34\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    class: \"fa fa-bars\",\n    \"aria-hidden\": \"true\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 88\n    }\n  }), \" Menu\"))));\n};","map":{"version":3,"sources":["D:/Clients Projects/AskMeFreely/src/MyComponents/Header.js"],"names":["React","useEffect","useState","useRef","useLocation","useNavigate","Link","ACCESS_TOKEN","GOOGLE_AUTH_URL","LOGGED_IN_NAME","LOGGED_IN_EMAIL","GoogleLogin","useMediaQuery","handleLogin","handleLoginFailure","validateTokenAndLogin","handleLogout","Header","props","ref","isMobile","query","showDropdown","setShowDropDown","showNestedDropdown","setShowNestedDropDown","closeDropDown","toggleNestedDropDown","oldValue","toggleDropDown","handleLoginWithProps","googleData","updateUser","access_token","localStorage","getItem","isLoggedIn","console","log","checkIfClickedOutside","e","current","target","contains","document","addEventListener","removeEventListener","newLocation","pathname","state","fromDashboard","user","name","split","renderProps","onClick","disabled","process","env","REACT_APP_GOOGLE_API_KEY"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\r\nimport { useLocation } from 'react-router';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { ACCESS_TOKEN, GOOGLE_AUTH_URL, LOGGED_IN_NAME, LOGGED_IN_EMAIL } from '../constants/url';\r\nimport GoogleLogin from 'react-google-login';\r\nimport { useMediaQuery } from 'react-responsive';\r\nimport { handleLogin, handleLoginFailure, validateTokenAndLogin,handleLogout } from '../utils/UserLoginUtils';\r\n\r\nexport const Header = (props) => {\r\n    const ref = useRef()\r\n    const isMobile = useMediaQuery({ query: `(max-width: 900px)` });\r\n    const [showDropdown, setShowDropDown] = useState(false);\r\n    const [showNestedDropdown, setShowNestedDropDown] = useState(false);\r\n \r\n\r\n    const closeDropDown = () => {\r\n        setShowNestedDropDown(false);\r\n        setShowDropDown(false);\r\n    }\r\n\r\n    const toggleNestedDropDown = () => {\r\n        setShowNestedDropDown((oldValue) => {\r\n            return !oldValue;\r\n        })\r\n    }\r\n\r\n    const toggleDropDown = () => {\r\n        setShowDropDown((oldValue) => {\r\n            return !oldValue;\r\n        })\r\n    }\r\n\r\n    const handleLoginWithProps = (googleData) => {\r\n        handleLogin(googleData, props.updateUser);\r\n    }\r\n\r\n\r\n    //TODO: Move this part to App.js\r\n    useEffect(() => {\r\n        let access_token = localStorage.getItem(ACCESS_TOKEN);\r\n\r\n        //if token is present, then maybe we should try to validate the token and log in\r\n        if (!props.isLoggedIn && access_token) {\r\n            validateTokenAndLogin(access_token, props.updateUser);\r\n        }\r\n    }, []);\r\n\r\n\r\n    useEffect(() => {\r\n        console.log(\"showDropdown changed\");\r\n        const checkIfClickedOutside = e => {\r\n            // If the menu is open and the clicked target is not within the menu,\r\n            // then close the menu\r\n            console.log(\"ref.current\", ref.current);\r\n            console.log(\"e.target\", e.target);\r\n            if (showDropdown && ref.current && !ref.current.contains(e.target)) {\r\n               console.log(\"call the dropdown\");\r\n              closeDropDown();\r\n            }\r\n          }\r\n      \r\n          document.addEventListener(\"mousedown\", checkIfClickedOutside)\r\n      \r\n          return () => {\r\n            // Cleanup the event listener\r\n            document.removeEventListener(\"mousedown\", checkIfClickedOutside)\r\n          }\r\n    }, [showDropdown]);\r\n\r\n    const newLocation = { pathname: \"/register\", state: { fromDashboard: true } };\r\n    //console.log(\"**** The google API key is\" + process.env.REACT_APP_GOOGLE_API_KEY);\r\n    return (\r\n        <>\r\n            <div id=\"header\" className=\"header fixed-top\">\r\n                <div className='navbar-container'>\r\n                    <div>\r\n                        <Link to=\"/\">\r\n                            {/* <img src={logo} className=\"logo-image img-fluid\" alt=\"Stammerers Connect\" /> */}\r\n                            <div className='navbar-caption'>STAMMERERS CONNECT</div>\r\n                        </Link>\r\n                    </div>\r\n                    {(!isMobile || showDropdown)\r\n                        &&\r\n                        <div id=\"navbar\" className=\"navbar\" ref={ref}>\r\n                            <ul>\r\n                                <li><Link to=\"/\" className='navbar-caption-text'onClick={closeDropDown}>About</Link></li>\r\n                                <li><Link to=\"/mentors\" className='navbar-caption-text' onClick={closeDropDown}>Mentors</Link></li>\r\n                                <li><Link to=\"/events\" className='navbar-caption-text' onClick={closeDropDown}>Events</Link></li>\r\n                                <li><Link to=\"/contactUs\" className='navbar-caption-text' onClick={closeDropDown}>Contact</Link></li>\r\n                                <li>\r\n                                    <div>\r\n                                        {\r\n                                            (props.isLoggedIn && props.user)\r\n                                                ?\r\n                                                <>\r\n                                                    <button className=\"myButton scrollto\" onClick={toggleNestedDropDown} ><i class=\"fa fa-user\" aria-hidden=\"true\"></i> {props.user && props.user.name ? \"Hi, \" + props.user.name.split(' ')[0] : 'Hi, User'}</button>    \r\n                                                    {\r\n                                                    showNestedDropdown \r\n                                                    ? \r\n                                                        <ul className=\"navbar-submenu\">\r\n                                                            <li><Link to={newLocation} className='navbar-caption-text' onClick={closeDropDown}>My Profile</Link></li>\r\n                                                            <li><Link to={{ pathname: \"/sessions\" }} className='navbar-caption-text' onClick={closeDropDown}>My Sessions</Link></li>\r\n                                                            <li><Link to=\"/\" onClick={() => {\r\n                                                                handleLogout(props.updateUser);\r\n                                                                closeDropDown();\r\n                                                            }\r\n                                                                } className='navbar-caption-text'>Log Out</Link></li>\r\n                                                        </ul>\r\n                                                    :\r\n                                                    <></>\r\n                                                    }   \r\n                                                </>\r\n                                                :\r\n                                                <>\r\n                                                    <GoogleLogin\r\n                                                        render={\r\n                                                            renderProps => (\r\n                                                                <button onClick={renderProps.onClick} disabled={renderProps.disabled} className=\"navbar-button\" ><i class=\"bi bi-google\"></i> Log In</button>\r\n                                                            )}\r\n                                                        clientId={process.env.REACT_APP_GOOGLE_API_KEY}\r\n                                                        buttonText=\"Log In\"\r\n                                                        onSuccess={handleLoginWithProps}\r\n                                                        onFailure={handleLoginFailure}\r\n                                                        cookiePolicy={'single_host_origin'} />\r\n                                                </>\r\n                                        }\r\n                                    </div>\r\n                                </li>\r\n                            </ul>\r\n                        </div>}\r\n\r\n                    {isMobile && <button className='myButton' onClick={toggleDropDown}><i class=\"fa fa-bars\" aria-hidden=\"true\"></i> Menu</button>}\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}